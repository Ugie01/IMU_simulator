# MPU-6500 (GY-6500) IMU 데이터 시각화 도구 (Python)

## 1. 개요

본 리포지토리는 시리얼 통신(UART)으로 전송되는 IMU(관성 측정 장치) 데이터를 실시간으로 시각화하는 Python 스크립트 모음입니다.


* **`IMU_Graph.py`**: 가속도, 자이로, 상보 필터로 계산된 각도 등 다양한 센서 데이터를 2D 그래프로 실시간 플로팅
* **`IMU_3D.py`**: 계산된 Roll, Pitch, Yaw 값을 받아 IMU 센서의 3D 자세를 직관적으로 시각화

---

## 2. 개발 및 실행 환경

* **언어**: `Python 3.11.9`
* **필수 라이브러리**:
    * `pyserial`
    * `matplotlib`
    * `vpython`
* **하드웨어 요구사항**:
    * USB를 통해 PC와 연결된 개발보드에서 실행 중인 MPU-6500 드라이버 펌웨어

---

## 3. 핵심 기능

### 3.1. `IMU_Graph.py` (2D 실시간 그래프)

* **다중 데이터 실시간 플로팅**: 개발보드에서 수신되는 여러 종류의 데이터를 동시에 그래프로 표시
* **분리된 그래프 창**: 아래 데이터들을 각각 독립된 창에 시각화하여 가독성 향상
    * Roll (가속도계산값, 자이로계산값, 상보필터값)
    * Pitch (가속도계산값, 자이로계산값, 상보필터값)
    * Yaw (자이로 적분값)
    * 원본 가속도 (X, Y, Z)
    * 원본 자이로 (X, Y, Z)
    * 오프셋 보정된 가속도 (X, Y, Z)
    * 오프셋 보정된 자이로 (X, Y, Z)
* **쉬운 설정**: 스크립트 상단의 `SERIAL_PORT`와 `BAUD_RATE` 변수만 수정하여 쉽게 환경을 설정

### 3.2. `IMU_3D.py` (3D 실시간 시각화)

* **직관적인 3D 자세 표현**: `VPython` 라이브러리를 사용하여 IMU 센서의 Roll, Pitch, Yaw 변화를 3차원 공간상의 객체로 실시간 렌더링
* **사용자 인터페이스**: 시각화 창에 `프로그램 종료` 버튼이 있어 쉽게 프로그램을 중지
* **디버깅 정보**: 3D 화면 하단에 현재 수신된 Roll, Pitch, Yaw 각도 값을 텍스트로 표시하여 디버깅

---

## 4. 사용 방법

1.  **필수 라이브러리 설치**
    터미널 또는 명령 프롬프트에서 아래 명령어를 실행하여 필요한 Python 라이브러리를 설치
    ```bash
    pip install pyserial matplotlib vpython
    ```

2.  **하드웨어 연결 및 펌웨어 실행**
    * MPU-6500 드라이버 펌웨어가 업로드된 개발보드를 PC에 USB로 연결
    * 펌웨어가 정상적으로 실행되어 UART를 통해 데이터가 출력되고 있는지 확인

3.  **시리얼 포트 확인**
    * **Windows**: `장치 관리자` -> `포트 (COM & LPT)`에서 개발보드가 연결된 `COM` 포트 번호를 확인
    * **macOS/Linux**: 터미널에서 `ls /dev/tty.*` 또는 `ls /dev/cu.*` 명령어로 포트 이름을 확인

4.  **스크립트 설정 및 실행**
    * `IMU_Graph.py` 또는 `IMU_3D.py` 파일을 open
    * `SERIAL_PORT` 변수의 값을 **3번**에서 확인한 포트 이름으로 수정
        ```python
        # 예시 (Windows)
        SERIAL_PORT = 'COM3'
        
        # 예시 (macOS)
        # SERIAL_PORT = '/dev/tty.usbmodem14201' 
        ```
    * 터미널에서 스크립트를 실행
        ```bash
        # 2D 그래프 시각화 실행
        python IMU_Graph.py

        # 3D 자세 시각화 실행
        python IMU_3D.py
        ```

---

## 5. 데이터 형식 요구사항

각 스크립트는 특정 형식으로 전송되는 데이터를 파싱하도록 설계되었습니다. 펌웨어의 `printf` 문이 아래 형식과 일치하는지 확인해야 합니다.

* **`IMU_Graph.py`**
    * `"접두사,값1,값2,값3\r\n"` 또는 `"접두사,값1\r\n"` 형식의 문자열
    * **예시**:
        ```c
        // 코드 예시
        printf("roll,%.2f,%.2f,%.2f\r\n", accel_roll, gyro_roll, filtered_roll);
        printf("a,%.3f,%.3f,%.3f\r\n", accel.x, accel.y, accel.z);
        printf("yaw,%.2f\r\n", yaw_angle);
        ```

* **`IMU_3D.py`**
    * `"c,roll값,pitch값,yaw값\r\n"` 형식의 문자열
    * **예시**:
        ```c
        // 코드 예시
        printf("c,%.2f,%.2f,%.2f\r\n", gy6500_1.roll, gy6500_1.pitch, gy6500_1.yaw);
        ```

---

## 6. 주의사항

* `BAUD_RATE` (기본값: 115200)가 펌웨어의 UART 설정과 반드시 일치해야 합니다.
* 스크립트 실행 시 `포트를 열 수 없습니다` 에러가 발생하면, 다른 프로그램(예: Tera Term, PuTTY 등)이 해당 시리얼 포트를 사용 중인지 확인하고 종료 후 다시 시도하세요.
* 그래프나 3D 객체가 움직이지 않는다면, 개발보드에서 전송하는 데이터 형식이 **5번 항목**과 일치하는지 확인하세요.